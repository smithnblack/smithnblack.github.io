<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IBD Portal | Compare</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="./lib/d3.tip.v0.6.3.js"></script>


    <link rel="stylesheet" href="./css/main.css"/>



      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.3/js/bootstrap-select.min.js"></script>

      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>


  <body>
      <!-- Statische Navbar -->
      <nav class="navbar navbar-default navbar-static-top">
          <div class="container">
              <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                      <span class="sr-only">Navigation ein-/ausblenden</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                  </button>
                  <a class="navbar-brand logoText"  href="./index.html">IBD Benchmarking Portal</a>
              </div>
              <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav">
                      <li><a href="./overview.html">Overview</a></li>

                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Benchmarks <span class="caret"></span></a>
                          <ul class="dropdown-menu">
                              <li><a href="./bench_type.html">Benchmark Type</a></li>
                              <li><a href="data_time.html">Datasize vs. Time</a></li>
                              <li><a href="data_cost.html">Datasize vs. Cost</a></li>
                              <li><a href="./nodes_time.html">Data Nodes vs. VM RAM vs. Time</a></li>

                              <li role="separator" class="divider"></li>
                              <li><a href="./compare.html">Compare</a></li>
                              <li><a href="./hadoop.html">Hadoop Version</a></li>
                              <li><a href="./custom.html">Custom</a></li>

                          </ul>
                      </li>
                      <li><a href="./import.html">Import</a></li>
                  </ul>

                  <ul class="nav navbar-nav navbar-right">
                      <li><a href="./about.html">About us</a></li>
                      <li><a href="./contact.html">Contact</a></li>
                  </ul>
              </div><!--/.nav-collapse -->
          </div>
      </nav>


      <div class="container-toolbar" id="toolbar1">
        <p>

          <!--TODO set selected item as selected-->
          <div class="dropdown pull-left" id="dropdownB">
              <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                  Filter
                  <span class="caret"></span></button>
              <ul class="dropdown-menu" id="dropdown1">
                  <li><a href="#">Execution Time</a></li>
                  <li><a href="#">Price</a></li>
                  <li><a href="#">RAM</a></li>
              </ul>
          </div>

        </p>
      </div>



      <!--Page to compare diferent benchmarks that are selected with chosen filter-->

      <div class="container" id=grafik></div>

      <div class="container" id=grafik-2ndlvl></div>






      <script>

          var benchInfos = {
              "tpch_query1":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query2":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query4":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query5":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query6":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query7":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query8":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query9":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query10":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query11":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query12":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query13":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query14":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query15":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query16":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query17":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query18":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query19":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query20":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query21":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query22":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query1_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query2_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query3_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query4_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query5_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query6_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query7_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query8_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query9_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query10_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query11_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query12_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query13_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query14_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query15_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query16_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query17_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query18_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query19_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query20_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query21_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",
              "tpch_query22_c3":
                      "TPC-H is the de facto benchmark standard for testing data warehouse capability of a system. Instead of representing the activity of any particular business  segment,  TPC-H  models  any  industry  that  manages,  sells,  or  distributes products  worldwide  (e.g.,  car  rental,  food  distribution,  parts,  suppliers,  etc.). The benchmark is technology-agnostic.",

              "sort":
                      "This workload sorts its text input data, which is generated using RandomTextWriter.",
              "wordcount":
                      "This workload counts the occurrence of each word in the input data, which are generated using RandomTextWriter. It is representative of another typical class of real world MapReduce jobs - extracting a small amount of interesting data from large data set.",
              "terasort":
                      "TeraSort is a standard benchmark created by Jim Gray. Its input data is generated by Hadoop TeraGen example program.",
              "uservisits_copy":
                      "This workload benchmarks PageRank algorithm implemented in Spark-MLLib/Hadoop (a search engine ranking benchmark included in pegasus 2.0) examples. The data source is generated from Web data whose hyperlinks follow the Zipfian distribution.",
              "join":
                      "These workloads are developed based on SIGMOD 09 paper -A Comparison of Approaches to Large-Scale Data Analysis- and HIVE-396. It contains Hive queries (Aggregation and Join) performing the typical OLAP queries described in the paper. Its input is also automatically generated Web data with hyperlinks following the Zipfian distribution.",
              "prepare_aggregation":
                      "These workloads are developed based on SIGMOD 09 paper -A Comparison of Approaches to Large-Scale Data Analysis- and HIVE-396. It contains Hive queries (Aggregation and Join) performing the typical OLAP queries described in the paper. Its input is also automatically generated Web data with hyperlinks following the Zipfian distribution.",
              "scan":
                      "These workloads are developed based on SIGMOD 09 paper -A Comparison of Approaches to Large-Scale Data Analysis- and HIVE-396. It contains Hive queries (Aggregation and Join) performing the typical OLAP queries described in the paper. Its input is also automatically generated Web data with hyperlinks following the Zipfian distribution.",
              "grep":
                      "A map/reduce program that counts the matches of a regex in the input.",
              "prepare_join":
                      " A job that effects a join over sorted, equally partitioned datasets.",
              "dfsio_read":
                      "TestDFSIO is a HDFS benchmark included in Hadoop distributions. It is designed to stress test the storage I/O (read and write) capabilities of a cluster. In this way performance bottlenecks in network, hardware, OS and Hadoop setup can be found and fixed. The benchmark consists of two parts: TestDFSIO-write and TestDFSIO-read. The write program starts multiple map tasks with each task writing a separate HDFS file. The read program starts multiple map tasks with each task sequentially reading the previously written HDFS files and measuring the file size and the task execution time. The benchmark uses a single reduce task to measure and compute two performance metrics for each map task: Average I/O Rate and Throughput. Respectively, Equation 1 and Equation 2 illustrate how the two metrics are calculated with N as the total number of map tasks and the index i (0< i < N), identifying the individual tasks.",
              "dfsio_write":
                      "TestDFSIO is a HDFS benchmark included in Hadoop distributions. It is designed to stress test the storage I/O (read and write) capabilities of a cluster. In this way performance bottlenecks in network, hardware, OS and Hadoop setup can be found and fixed. The benchmark consists of two parts: TestDFSIO-write and TestDFSIO-read. The write program starts multiple map tasks with each task writing a separate HDFS file. The read program starts multiple map tasks with each task sequentially reading the previously written HDFS files and measuring the file size and the task execution time. The benchmark uses a single reduce task to measure and compute two performance metrics for each map task: Average I/O Rate and Throughput. Respectively, Equation 1 and Equation 2 illustrate how the two metrics are calculated with N as the total number of map tasks and the index i (0< i < N), identifying the individual tasks.",
              "randomtextwriter":
                      "A map/reduce program that writes 10GB of random textual data per node.",
              "teravalidate":
                      "Checking results of terasort."


          };


        var query = "SELECT DISTINCT bench FROM data";
        fetch("http://localhost:8086/query?pretty=true&db=test&q="+query, {
                   method: 'GET',

                 }).then(function(response) {

                     response.json().then(function(data) {


         var clickedNodes = [];
         var filter ="";

         var width = 960,
         height = 500,
         padding = 1.5, // separation between same-color nodes
         clusterPadding = 6, // separation between different-color nodes
         maxRadius = 12;





        var data =data.results[0].series[0].values;

         //unique cluster/group id'
        var cs = [1];
         var n = data.length, // total number of nodes
             m = 1; // number of distinct clusters

         //create clusters and nodes
         var clusters = new Array(m);
         var nodes = [];

         for (var i = 0; i<n; i++){
             nodes.push(create_nodes(data,i));
         }

         var force = d3.layout.force()
             .nodes(nodes)
             .size([width, height])
             .gravity(.02)
             .charge(0)
             .on("tick", tick)
             .start();


         var svg = d3.select("#grafik").append("svg")
             .attr("width", width)
             .attr("height", height);

         var node = svg.selectAll("circle")
             .data(nodes)
             .enter().append("g").call(force.drag);


         node.append("circle")
             .style("fill", function (d) {
             return "#337ab7";
             })
             .style("opacity", 0.2)
                 .attr("id",function (d) {
                     return "data"+d.id;
                 })
             .attr("r", function(d){return d.radius})
             .on("mouseover", handleMouseOver)
             .on("mouseout", handleMouseOut)
             .on("click",clickFunction);

         node.append("text")
               .attr("dy", ".3em")
               .style("font-size", "10px")
            //    .style("fill","grey")
               .style("text-anchor", "middle")
               .text(function(d) { return d.text.replace("_"," "); });


         // add the tooltip area to the webpage
         var tooltip = d3.select("#grafik").append("div")
                 .attr("class", "tooltip")
                 .style("opacity", 0);




         function create_nodes(data,node_counter) {

           var i = cs.indexOf(data[node_counter].group),
               r = Math.sqrt((i + 1) / m * -Math.log(Math.random())) * maxRadius,
               d = {
                 cluster: i,
                 radius: 25,
                 text: data[node_counter][1],
                 x: Math.cos(i / m * 2 * Math.PI) * 200 + width / 2 + Math.random(),
                 y: Math.sin(i / m * 2 * Math.PI) * 200 + height / 2 + Math.random(),
                 id: Math.sin(i / m * 2 * Math.PI) * 200 + height / 2 + Math.random()
               };
           if (!clusters[i] || (r > clusters[i].radius)) clusters[i] = d;
           return d;
         };




         function tick(e) {
             node.each(cluster(3 * e.alpha * e.alpha))
                 .each(collide(.1))
             .attr("transform", function (d) {
                 var k = "translate(" + d.x + "," + d.y + ")";
                 return k;
             })

         }

         // Move d to be adjacent to the cluster node.
         function cluster(alpha) {
             return function (d) {
                 var cluster = clusters[d.cluster];
                 if (cluster === d) return;
                 var x = d.x - cluster.x,
                     y = d.y - cluster.y,
                     l = Math.sqrt(x * x + y * y),
                     r = d.radius + cluster.radius;
                 if (l != r) {
                     l = (l - r) / l * alpha;
                     d.x -= x *= l;
                     d.y -= y *= l;
                     cluster.x += x;
                     cluster.y += y;
                 }
             };
         }

         // Resolves collisions between d and all other circles.
         function collide(alpha) {
             var quadtree = d3.geom.quadtree(nodes);
             return function (d) {
                 var r = d.radius + maxRadius + Math.max(padding, clusterPadding),
                     nx1 = d.x - r,
                     nx2 = d.x + r,
                     ny1 = d.y - r,
                     ny2 = d.y + r;
                 quadtree.visit(function (quad, x1, y1, x2, y2) {
                     if (quad.point && (quad.point !== d)) {
                         var x = d.x - quad.point.x,
                             y = d.y - quad.point.y,
                             l = Math.sqrt(x * x + y * y),
                             r = d.radius + quad.point.radius + (d.cluster === quad.point.cluster ? padding : clusterPadding);
                         if (l < r) {
                             l = (l - r) / l * alpha;
                             d.x -= x *= l;
                             d.y -= y *= l;
                             quad.point.x += x;
                             quad.point.y += y;
                         }
                     }
                     return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
                 });
             };
         }


         Array.prototype.contains = function(v) {
             for(var i = 0; i < this.length; i++) {
                 if(this[i] === v) return true;
             }
             return false;
         };

         function handleMouseOver(d, i) {  // Add interactivity

           // Use D3 to select element, change color and size
           d3.select(this).attr({
             r: 20 * 2
           });


             tooltip.transition()
                     .duration(200)
                     .style("opacity", .9);
             tooltip.html("<strong>Explanation:</strong> "+benchInfos[d.text])
                     .style("background-color", "white")
                     .style("color", "black")
                     .style("text-align", "center")
                     .style("padding","5px 0")
                     .style("border-radius","6px")
                     .style("left",width-145+"px")
                     .style("top",140+"px")
                     .style("width",250+"px")

                     .style("text-align","justify");
         }


       function handleMouseOut(d, i) {  // Add interactivity

         // Use D3 to select element, change color and size
         d3.select(this).attr({
           r: 25
         });

           tooltip.transition()
                   .duration(500)
                   .style("opacity",0)
                   .style("left",width-145+"px")
                   .style("top",200+"px");
        }

         // set filter
         $('#dropdownB li a').on('click', function(){
             switch($(this).text()) {
                 case "RAM":
                     filter = "vm_RAM";
                     break;
                 case "Execution Time":
                     filter = "exe_time";
                     break;
                 case "Price":
                     filter = "cost_hour";
                     break;
                 default:
                     filter = "no filter set";
             }
             doVisualize(filter,clickedNodes);

         });


        //on click
        function clickFunction(d,i) {


            if (clickedNodes.includes(d)) {

                // change back the style
                document.getElementById("data" + d.id).style.fill = "#337ab7";
                document.getElementById("data" + d.id).style.opacity = 0.2;
                //remove svg 2nd level
                d3.selectAll('#grafik-2ndlvl').remove();
                clickedNodes.pop(d);


            } else {
                // first time clicked?
                clickedNodes.push(d);

                d3.select(this).attr({
                    style: "fill: grey"
                });

            }


        }
                         })


                     }).catch(function(err) {
                          console.log("JSON Object not able to be fetched from InfluxDB")
              })

              function pageScroll() {
                  window.scrollBy(0,1);
                  scrolldelay = setTimeout(pageScroll,5);
              }


      /**
       * to visualize the graph at 2nd level SVG
       * @param filter = to compare benchmarks
       * @param clickedNodes = benchmarks
       *
       * make query with filter and selected notes that has been chosen and fetch the data from database
       */
      function doVisualize(filter,clickedNodes) {

              // generate query
              var query2 = "select "+filter+",bench,description,id_exec from data where ";

              clickedNodes.forEach(function (d,i) {

                  if (i>0){
                      query2 = query2+" OR bench='"+d.text+"'";
                  } else {
                      query2 = query2+"bench='"+d.text+"'";
                  }
              });



              fetch("http://localhost:8086/query?pretty=true&db=test&q=" + query2, {
                    method: 'GET',

                }).then(function (response) {
                            response.json().then(function (data) {

                                var data2 =data.results[0].series[0].values;

                                var color = d3.scale.category20();
                                //unique cluster/group id'
                                var cs = [1];
                                var n = data2.length, // total number of nodes
                                        m = 1; // number of distinct clusters

                                //create clusters and nodes
                                var clusters = new Array(m);
                                var nodes = [];

                                for (var i = 0; i<n; i++){
                                    nodes.push(create_nodes(data2,i));
                                }

                                var margin = {top: 20, right: 40, bottom: 100, left: 60, separator: 50},
                                        width = 960 - margin.left - margin.right,
                                        height = 600 - margin.top - margin.bottom;


                                var x = d3.scale.ordinal().rangeRoundBands([0, width], .08);

                                var y = d3.scale.linear().range([height, 0]);

                                var xAxis = d3.svg.axis()
                                        .scale(x)
                                        .orient("bottom")
                                        .ticks(nodes.length)
                                        ;

                                var yAxis = d3.svg.axis()
                                        .scale(y)
                                        .orient("left")
                                        .ticks(20);

                                var svg = d3.select("#grafik-2ndlvl").append("svg")
                                        .attr("width", width + margin.left + margin.right)
                                        .attr("height", height + margin.top + margin.bottom)
                                        .append("g")
                                        .attr("transform",
                                                "translate(" + margin.left + "," + margin.top + ")");



                                // add the tooltip area to the webpage
                                var tooltip2 = d3.select("#grafik").append("div")
                                        .attr("class", "tooltip")
                                        .style("opacity", 0);

                                    x.domain(nodes.map(function(d, i) { return d.bench_type; }));
                                    y.domain([0, d3.max(nodes, function(d) { return d.filter; })]);

                                    svg.append("g")
                                            .attr("class", "x axis")
                                            .attr("transform", "translate(0," + height + ")")
                                            .call(xAxis)
                                            .selectAll("text")
                                            .style("text-anchor", "end")
                                            .attr("dx", "-.8em")
                                            .attr("dy", "-.55em")
                                            .attr("transform", "rotate(-90)" );

                                    svg.append("g")
                                            .attr("class", "y axis")
                                            .call(yAxis)
                                            .append("text")
                                            .attr("transform", "rotate(-90)")
                                            .attr("y", 6)
                                            .attr("dy", ".71em")
                                            .style("text-anchor", "end")
                                            .text(filter.replace("_"," "));

                                    svg.selectAll("bar")
                                            .data(nodes)
                                            .enter().append("rect")
                                            .style("fill",function(d,i){return color(i);})
                                            .attr("x", function(d) { console.log(d.filter,d.bench_type); return x(d.bench_type); })
                                            .attr("width", x.rangeBand())
                                            .attr("y", function(d) { return y(d.filter); })
                                            .style("opacity",0.4)

                                            .attr("height", function(d) { return height - y(d.filter); })
                                            .on("mouseover", handleMouseOver)
                                            .on("mouseout", handleMouseOut);


                                function handleMouseOver(d, i) {

                                    tooltip2.transition()
                                            .duration(200)
                                            .style("opacity", .9);
                                    tooltip2.html("<strong>Machine:</strong> </br>"+d.description)
                                            .style("background-color", "white")
                                            .style("color", "black")
                                            .style("text-align", "center")
                                            .style("padding","5px 0")
                                            .style("border-radius","6px")
                                            .style("left", (d3.event.pageX +20) + "px")
                                            .style("top", (d3.event.pageY - 28) + "px")

                                            .style("width",250+"px")

                                            .style("text-align","justify");
                                }

                                function handleMouseOut(d, i) {  // Add interactivity

                                    tooltip2.transition()
                                            .duration(500)
                                            .style("opacity", 0);

                                }






                                /**
                                 * creating nodes from the data to use it for visualizer
                                 * @param data
                                 * @param node_counter
                                 * @returns {{exe_time: *, bench_type: *, description: *, id_exec: *}}
                                 */
                                function create_nodes(data, node_counter) {


                                    var d = {
                                        filter: data[node_counter][1],
                                        bench_type: data[node_counter][2],
                                        description: data[node_counter][3],
                                        cost: data[node_counter][5],
                                        id_exec: data[node_counter][6]
                                    }
                                    return d;

                                };


                            }).catch(function (err) {
                                console.log("JSON Object not able to be fetched from InfluxDB", err)
                            })
                        }
                )

          }


              </script>
  </body>
</html>
